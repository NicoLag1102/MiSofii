<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Para vos ‚ù§Ô∏è</title>
  <link rel="stylesheet" href="styles.css">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    html, body {
      width: 100%;
      height: 100%;
      overflow: hidden;
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(180deg, #330044, #110022);
    }

    canvas {
      position: absolute;
      top: 0;
      left: 0;
    }

    .contenido {
      position: relative;
      z-index: 2;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100%;
    }

    #botonCarta {
      padding: 15px 30px;
      font-size: 1.2rem;
      background-color: #aa55ff;
      color: white;
      border: none;
      border-radius: 12px;
      cursor: pointer;
      transition: 0.3s ease;
    }

    #botonCarta:hover {
      background-color: #bb66ff;
      transform: scale(1.05);
    }

    .carta {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%) scale(0);
      background: rgba(255, 255, 255, 0.95);
      padding: 25px;
      border-radius: 20px;
      width: 90%;
      max-width: 400px;
      text-align: center;
      z-index: 3;
      transition: transform 0.4s ease;
    }

    .carta.abierta {
      transform: translate(-50%, -50%) scale(1);
    }

    .texto-carta h2 {
      margin-bottom: 10px;
      color: #330044;
    }

    .texto-carta p {
      color: #222;
      margin-bottom: 20px;
    }

    #cerrarCarta {
      margin-top: 15px;
      padding: 10px 20px;
      background: #ff88ff;
      border: none;
      border-radius: 8px;
      cursor: pointer;
    }

    .spotify-container iframe {
      width: 100%;
      height: 352px;
      border-radius: 12px;
      margin-top: 15px;
    }
  </style>
</head>
<body>
  <canvas id="mariposas"></canvas>

  <div class="contenido">
    <button id="botonCarta">Abrir carta</button>

    <div id="carta" class="carta">
      <div class="texto-carta">
        <h2>Para vos, mi amor üíú</h2>
        <p>Te amo m√°s de lo que las palabras pueden decir.<br>Gracias por estar en mi vida.</p>

        <div class="spotify-container">
          <iframe style="border-radius:12px" 
            src="https://open.spotify.com/embed/track/2Yr4uOmBLMepYXQbhOVNTO?utm_source=generator"
            width="100%" height="352" frameBorder="0" allowfullscreen=""
            allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture"
            loading="lazy">
          </iframe>
        </div>
      </div>
      <button id="cerrarCarta">Cerrar</button>
    </div>
  </div>

  <script>
    const canvas = document.getElementById("mariposas");
    const ctx = canvas.getContext("2d");
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    class Mariposa {
      constructor() {
        this.reset();
      }
      reset() {
        this.x = Math.random() * canvas.width;
        this.y = canvas.height + Math.random() * 100;
        this.size = 20 + Math.random() * 15;
        this.speed = 0.5 + Math.random() * 1.5;
        this.angle = Math.random() * Math.PI * 2;
        this.alpha = 0.3 + Math.random() * 0.7;
      }
      update() {
        this.y -= this.speed;
        this.x += Math.sin(this.angle) * 0.5;
        if (this.y < -this.size || this.x < 0 || this.x > canvas.width) {
          this.reset();
        }
      }
      draw() {
        ctx.save();
        ctx.globalAlpha = this.alpha;
        ctx.fillStyle = "violet";
        ctx.beginPath();
        ctx.moveTo(this.x, this.y);
        ctx.bezierCurveTo(this.x + this.size, this.y - this.size, this.x + this.size, this.y + this.size, this.x, this.y);
        ctx.bezierCurveTo(this.x - this.size, this.y + this.size, this.x - this.size, this.y - this.size, this.x, this.y);
        ctx.fill();
        ctx.restore();
      }
    }

    const mariposas = Array.from({ length: 40 }, () => new Mariposa());

    function animar() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      mariposas.forEach(m => {
        m.update();
        m.draw();
      });
      requestAnimationFrame(animar);
    }
    animar();

    window.addEventListener("resize", () => {
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
    });

    // Carta y bot√≥n
    const boton = document.getElementById('botonCarta');
    const carta = document.getElementById('carta');
    const cerrar = document.getElementById('cerrarCarta');

    boton.addEventListener('click', () => {
      carta.classList.add('abierta');
    });

    cerrar.addEventListener('click', () => {
      carta.classList.remove('abierta');
    });
  </script>
</body>
</html>
